<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>mytracks documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">mytracks documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>MapService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/map/map.service.ts</code>
        </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#importLayer">importLayer</a>
                            </li>
                            <li>
                                <a href="#map">map</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#router">router</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#trackManager">trackManager</a>
                            </li>
                            <li>
                                <a href="#userTracks">userTracks</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_fitMapToFeatures">_fitMapToFeatures</a>
                            </li>
                            <li>
                                <a href="#clearTrack">clearTrack</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createControlPointFromCoordinate">createControlPointFromCoordinate</a>
                            </li>
                            <li>
                                <a href="#deleteLastPoint">deleteLastPoint</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#exportGpx">exportGpx</a>
                            </li>
                            <li>
                                <a href="#getCurrentTrackAsGeojson">getCurrentTrackAsGeojson</a>
                            </li>
                            <li>
                                <a href="#hasPoints">hasPoints</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#importGpx">importGpx</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#initMap">initMap</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#setProfile">setProfile</a>
                            </li>
                            <li>
                                <a href="#startEditing">startEditing</a>
                            </li>
                            <li>
                                <a href="#stopEditing">stopEditing</a>
                            </li>
                            <li>
                                <a href="#updateTracksList">updateTracksList</a>
                            </li>
                            <li>
                                <a href="#viewTrack">viewTrack</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(apiService: <a href="../injectables/ApiService.html">ApiService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">src/app/map/map.service.ts:49</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>apiService</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/ApiService.html" target="_self" >ApiService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="_fitMapToFeatures"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            _fitMapToFeatures
                            </b>
                            <a href="#_fitMapToFeatures"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>_fitMapToFeatures(features: Array<Feature>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="154" class="link-to-prism">src/app/map/map.service.ts:154</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>features</td>
                                                        <td>
                                                                    <code>Array&lt;Feature&gt;</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="clearTrack"></a>
                        <span class="name">
                            <b>
                            clearTrack
                            </b>
                            <a href="#clearTrack"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>clearTrack()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="150" class="link-to-prism">src/app/map/map.service.ts:150</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="createControlPointFromCoordinate"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            createControlPointFromCoordinate
                            </b>
                            <a href="#createControlPointFromCoordinate"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>createControlPointFromCoordinate(coordinate: ol.Coordinate)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="116" class="link-to-prism">src/app/map/map.service.ts:116</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>coordinate</td>
                                                        <td>
                                                                    <code>ol.Coordinate</code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>ol.Feature</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="deleteLastPoint"></a>
                        <span class="name">
                            <b>
                            deleteLastPoint
                            </b>
                            <a href="#deleteLastPoint"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>deleteLastPoint()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="188" class="link-to-prism">src/app/map/map.service.ts:188</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="exportGpx"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            exportGpx
                            </b>
                            <a href="#exportGpx"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>exportGpx()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="103" class="link-to-prism">src/app/map/map.service.ts:103</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getCurrentTrackAsGeojson"></a>
                        <span class="name">
                            <b>
                            getCurrentTrackAsGeojson
                            </b>
                            <a href="#getCurrentTrackAsGeojson"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>getCurrentTrackAsGeojson()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="183" class="link-to-prism">src/app/map/map.service.ts:183</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code>GeoJsonObject</code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="hasPoints"></a>
                        <span class="name">
                            <b>
                            hasPoints
                            </b>
                            <a href="#hasPoints"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>hasPoints()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="192" class="link-to-prism">src/app/map/map.service.ts:192</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="importGpx"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            importGpx
                            </b>
                            <a href="#importGpx"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>importGpx(data)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="133" class="link-to-prism">src/app/map/map.service.ts:133</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>data</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="initMap"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            initMap
                            </b>
                            <a href="#initMap"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>initMap()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="60" class="link-to-prism">src/app/map/map.service.ts:60</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="setProfile"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            setProfile
                            </b>
                            <a href="#setProfile"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>setProfile(profile: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="129" class="link-to-prism">src/app/map/map.service.ts:129</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>profile</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="startEditing"></a>
                        <span class="name">
                            <b>
                            startEditing
                            </b>
                            <a href="#startEditing"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>startEditing()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="175" class="link-to-prism">src/app/map/map.service.ts:175</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="stopEditing"></a>
                        <span class="name">
                            <b>
                            stopEditing
                            </b>
                            <a href="#stopEditing"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>stopEditing()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="179" class="link-to-prism">src/app/map/map.service.ts:179</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="updateTracksList"></a>
                        <span class="name">
                            <b>
                            updateTracksList
                            </b>
                            <a href="#updateTracksList"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>updateTracksList()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">src/app/map/map.service.ts:56</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="viewTrack"></a>
                        <span class="name">
                            <b>
                            viewTrack
                            </b>
                            <a href="#viewTrack"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>viewTrack(track)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="164" class="link-to-prism">src/app/map/map.service.ts:164</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>track</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="importLayer"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            importLayer
                            </b>
                            <a href="#importLayer"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>importLayer:     <code>OlVectorLayer</code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>OlVectorLayer</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/app/map/map.service.ts:48</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="map"></a>
                        <span class="name">
                            <b>
                            map
                            </b>
                            <a href="#map"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>map:     <code>OlMap</code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>OlMap</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/map/map.service.ts:44</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="router"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            router
                            </b>
                            <a href="#router"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>router:     <code>OSRMRouter</code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>OSRMRouter</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="46" class="link-to-prism">src/app/map/map.service.ts:46</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="trackManager"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            trackManager
                            </b>
                            <a href="#trackManager"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>trackManager:     <code><a href="../interfaces/Track.html" target="_self" >TrackManager</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../interfaces/Track.html" target="_self" >TrackManager</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/app/map/map.service.ts:45</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="userTracks"></a>
                        <span class="name">
                            <b>
                            userTracks
                            </b>
                            <a href="#userTracks"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>userTracks:     <code><a href="../interfaces/TrackListItem.html" target="_self" >Array&lt;TrackListItem&gt;</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../interfaces/TrackListItem.html" target="_self" >Array&lt;TrackListItem&gt;</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">src/app/map/map.service.ts:49</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Injectable} from &#x27;@angular/core&#x27;;
import OlMap from &#x27;ol/Map&#x27;;
// @ts-ignore
import {fromLonLat, addCommon} from &#x27;ol/proj&#x27;;
import OlTileLayer from &#x27;ol/layer/Tile&#x27;;
import OlVectorLayer from &#x27;ol/layer/Vector&#x27;;
import OlView from &#x27;ol/View&#x27;;
import OlOSMSource from &#x27;ol/source/OSM&#x27;;
import OlVectorSource from &#x27;ol/source/Vector&#x27;;
import GPXFormat from &#x27;ol/format/GPX&#x27;;
import GeoJSONFormat from &#x27;ol/format/GeoJSON&#x27;;

// @ts-ignore
import {createEmpty, extend} from &#x27;ol/extent&#x27;;


import TrackManager from &#x27;@geoblocks/edittrack/src/TrackManager&#x27;;
import OSRMRouter from &#x27;@geoblocks/router/src/OSRMRouter&#x27;;
import {controlPointStyle, importLayerStyleFunction, trackLayerStyleFunction} from &#x27;./style&#x27;;

import PointGeometry from &#x27;ol/geom/Point&#x27;;
import Feature from &#x27;ol/Feature&#x27;;

import saveAs from &#x27;save-as&#x27;;
import { GeoJsonObject } from &#x27;geojson&#x27;;
import { TrackListItem, ApiService } from &#x27;../api.service&#x27;;

const MAPBOX_TOKEN &#x3D; &#x27;pk.eyJ1IjoiZ2JvMiIsImEiOiJjam5kbGpqcTUwZTJ5M3BueTd6dHB3aHk3In0.Gi-NTgWMekLzwkz59kaMTQ&#x27;;

const MAPBOX_URLS &#x3D; {
  &#x27;walking&#x27;: &#x27;https://api.mapbox.com/directions/v5/mapbox/walking&#x27;,
  &#x27;cycling&#x27;: &#x27;https://api.mapbox.com/directions/v5/mapbox/cycling&#x27;,
};

const geojsonFormat &#x3D; new GeoJSONFormat();
addCommon();

@Injectable(
  {
    providedIn: &#x27;root&#x27;
  }
)
export class MapService {
  map: OlMap;
  private trackManager: TrackManager;
  private router: OSRMRouter;

  private importLayer: OlVectorLayer; // layer to display imported feature, e.g. from gpx
  userTracks: Array&lt;TrackListItem&gt; &#x3D; [];

  constructor(private apiService: ApiService) {
    this.initMap();
  }


  updateTracksList() {
    this.apiService.listTracks().then(tracks &#x3D;&gt; this.userTracks &#x3D; tracks);
  }

  private initMap() {
    const bgLayer &#x3D; new OlTileLayer({
      source: new OlOSMSource()
    });
    const trackLayer &#x3D; new OlVectorLayer({
      source: new OlVectorSource(),
      style: trackLayerStyleFunction
    });

    const importLayer &#x3D; this.importLayer &#x3D; new OlVectorLayer({
      source: new OlVectorSource,
      style: importLayerStyleFunction
    });

    const map &#x3D; this.map &#x3D; new OlMap({
      layers: [
        bgLayer,
        importLayer,
        trackLayer
      ],
      view: new OlView({
        center: fromLonLat([6.5628989, 46.5143871]),
        zoom: 13
      })
    });

    const projection &#x3D; map.getView().getProjection();

    const router &#x3D; this.router &#x3D; new OSRMRouter({
      projection,
      url: MAPBOX_URLS[&#x27;walking&#x27;],
      extraParams: &#x60;access_token&#x3D;${MAPBOX_TOKEN}&#x60;
    });

    this.trackManager &#x3D; new TrackManager({
      projection,
      map,
      trackLayer,
      router,
      style: controlPointStyle
    });
  }

  public exportGpx() {
    const lineString &#x3D; new GPXFormat().writeFeatures(
      [this.trackManager.getTrackFeature()],
      {
        featureProjection: this.map.getView().getProjection()
      }
    );

    const blob &#x3D; new Blob([lineString], {type: &#x27;application/gpx+xml&#x27;});

    saveAs(blob, &#x27;mytrack.gpx&#x27;);
  }

  private createControlPointFromCoordinate(coordinate: ol.Coordinate): ol.Feature {
    const geometry &#x3D; new PointGeometry(coordinate);

    const feature &#x3D; new Feature({
      geometry
    });
    feature.setProperties({
      type: &#x27;controlPoint&#x27;,
      snapped: true
    });
    return feature;
  }

  public setProfile(profile: string) {
    this.router.setUrl(MAPBOX_URLS[profile]);
  }

  public importGpx(data) {
    const features &#x3D; new GPXFormat().readFeatures(data, {
      featureProjection: this.map.getView().getProjection()
    });

    // we import gpx as a ground layer to assist track creation, so we are interested in LineString features only.
    // const lineFeatures &#x3D; features.filter(feature &#x3D;&gt; {
    //   return feature.getGeometry().getType() &#x3D;&#x3D;&#x3D; &#x27;LineString&#x27;; // TODO: or MultiLineString
    // });

    this.importLayer.getSource().clear();
    this.importLayer.getSource().addFeatures(features);

    // fit map to imported features
    this._fitMapToFeatures(features);
  }

  clearTrack() {
    this.trackManager.clear();
  }

  private _fitMapToFeatures(features: Array&lt;Feature&gt;) {
    const extent &#x3D; features.reduce((pre, feature) &#x3D;&gt; {
      return extend(pre, feature.getGeometry().getExtent());
    }, createEmpty());
    this.map.getView().fit(extent, {
      padding: [100, 100, 100, 100],
      duration: 1000
    });
  }

  viewTrack(track) {
    const geojson &#x3D; track.geojson;
    if (geojson) {
      const features &#x3D; geojsonFormat.readFeatures(geojson);
      this.trackManager.restoreFeatures(features);
      this._fitMapToFeatures(features);
    } else {
      this.trackManager.clear();
    }
  }

  startEditing() {
    this.trackManager.mode &#x3D; &#x27;edit&#x27;;
  }

  stopEditing() {
    this.trackManager.mode &#x3D; &#x27;view&#x27;;
  }

  getCurrentTrackAsGeojson(): GeoJsonObject {
    const features &#x3D; this.trackManager.getFeatures();
    return geojsonFormat.writeFeatures(features);
  }

  deleteLastPoint() {
    this.trackManager.deleteLastPoint();
  }

  hasPoints() {
    return this.trackManager.getFeatures().length !&#x3D;&#x3D; 0;
  }
}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'MapService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
